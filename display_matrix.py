#!/usr/bin/python
# -*- coding: utf-8 -*-

from k8055_classes import K8055MatrixDisplayController
from k8055_functions import list_to_mask
import pyk8055
import sys
import time

PIXMAP = {
	u'A': [
		[3],
		[2, 4],
		[1, 5],
		[1, 2, 3, 4, 5],
		[1, 5],
	],
	u'B': [
		[1, 2, 3, 4],
		[1, 5],
		[1, 2, 3, 4],
		[1, 5],
		[1, 2, 3, 4],
	],
	u'C': [
		[1, 2, 3, 4, 5],
		[1],
		[1],
		[1],
		[1, 2, 3, 4, 5],
	],
	u'D': [
		[1, 2, 3, 4],
		[1, 5],
		[1, 5],
		[1, 5],
		[1, 2, 3, 4],
	],
	u'E': [
		[1, 2, 3, 4, 5],
		[1],
		[1, 2, 3, 4],
		[1],
		[1, 2, 3, 4, 5],
	],
	u'F': [
		[1, 2, 3, 4, 5],
		[1],
		[1, 2, 3, 4],
		[1],
		[1],
	],
	u'G': [
		[1, 2, 3, 4, 5],
		[1],
		[1, 2, 3, 4, 5],
		[1, 5],
		[1, 2, 3, 4, 5],
	],
	u'H': [
		[1, 5],
		[1, 5],
		[1, 2, 3, 4, 5],
		[1, 5],
		[1, 5],
	],
	u'I': [
		[2, 3, 4],
		[3],
		[3],
		[3],
		[2, 3, 4],
	],
	u'J': [
		[1, 2, 3, 4, 5],
		[5],
		[5],
		[1, 5],
		[2, 3, 4],
	],
	u'K': [
		[1, 5],
		[1, 4],
		[1, 2, 3],
		[1, 4],
		[1, 5],
	],
	u'L': [
		[1],
		[1],
		[1],
		[1],
		[1, 2, 3, 4, 5],
	],
	u'M': [
		[1, 5],
		[1, 2, 4, 5],
		[1, 3, 5],
		[1, 5],
		[1, 5],
	],
	u'N': [
		[1, 5],
		[1, 2, 5],
		[1, 3, 5],
		[1, 4, 5],
		[1, 5],
	],
	u'O': [
		[2, 3, 4],
		[1, 5],
		[1, 5],
		[1, 5],
		[2, 3, 4],
	],
	u'P': [
		[1, 2, 3, 4],
		[1, 5],
		[1, 2, 3, 4],
		[1],
		[1],
	],
	u'Q': [
		[1, 2, 3, 4, 5],
		[1, 5],
		[1, 3, 5],
		[1, 4, 5],
		[1, 2, 3, 4, 5],
	],
	u'R': [
		[1, 2, 3, 4],
		[1, 5],
		[1, 2, 3, 4],
		[1, 4],
		[1, 5],
	],
	u'S': [
		[2, 3, 4, 5],
		[1],
		[2, 3, 4],
		[5],
		[1, 2, 3, 4],
	],
	u'T': [
		[1, 2, 3, 4, 5],
		[3],
		[3],
		[3],
		[3],
	],
	u'U': [
		[1, 5],
		[1, 5],
		[1, 5],
		[1, 5],
		[2, 3, 4],
	],
	u'V': [
		[1, 5],
		[1, 5],
		[1, 5],
		[2, 4],
		[3],
	],
	u'W': [
		[1, 5],
		[1, 5],
		[1, 3, 5],
		[1, 2, 4, 5],
		[1, 5],
	],
	u'X': [
		[1, 5],
		[2, 4],
		[3],
		[2, 4],
		[1, 5],
	],
	u'Y': [
		[1, 5],
		[2, 4],
		[3],
		[3],
		[3],
	],
	u'Z': [
		[1, 2, 3, 4, 5],
		[4],
		[3],
		[2],
		[1, 2, 3, 4, 5],
	],
	u'Ä': [
		[1, 5],
		[3],
		[2, 4],
		[1, 2, 3, 4, 5],
		[1, 5],
	],
	u'Ö': [
		[1, 5],
		[],
		[1, 2, 3, 4, 5],
		[1, 5],
		[1, 2, 3, 4, 5],
	],
	u'Ü': [
		[1, 5],
		[],
		[1, 5],
		[1, 5],
		[2, 3, 4],
	],
	u'ß': [
		[2, 3],
		[1, 4],
		[1, 3],
		[1, 4],
		[1, 3],
	],
	u'0': [
		[2, 3, 4],
		[1, 4, 5],
		[1, 3, 5],
		[1, 2, 5],
		[2, 3, 4],
	],
	u'1': [
		[2, 3],
		[3],
		[3],
		[3],
		[3],
	],
	u'2': [
		[2, 3, 4],
		[1, 5],
		[4],
		[3],
		[1, 2, 3, 4, 5],
	],
	u'3': [
		[1, 2, 3, 4],
		[5],
		[2, 3, 4],
		[5],
		[1, 2, 3, 4],
	],
	u'4': [
		[1, 5],
		[1, 5],
		[1, 2, 3, 4, 5],
		[5],
		[5],
	],
	u'5': [
		[1, 2, 3, 4, 5],
		[1],
		[1, 2, 3, 4],
		[5],
		[1, 2, 3, 4],
	],
	u'6': [
		[2, 3, 4],
		[1],
		[1, 2, 3, 4],
		[1, 5],
		[2, 3, 4],
	],
	u'7': [
		[1, 2, 3, 4, 5],
		[5],
		[4],
		[3],
		[2],
	],
	u'8': [
		[2, 3, 4],
		[1, 5],
		[2, 3, 4],
		[1, 5],
		[2, 3, 4],
	],
	u'9': [
		[2, 3, 4],
		[1, 5],
		[2, 3, 4, 5],
		[5],
		[2, 3, 4],
	],
	u'.': [
		[],
		[],
		[],
		[],
		[3],
	],
	u',': [
		[],
		[],
		[],
		[3],
		[2],
	],
	u'-': [
		[],
		[],
		[2, 3, 4],
		[],
		[],
	],
	u'–': [
		[],
		[],
		[1, 2, 3, 4, 5],
		[],
		[],
	],
	u'—': [
		[],
		[],
		[1, 2, 3, 4, 5],
		[],
		[],
	],
	u'_': [
		[],
		[],
		[],
		[],
		[1, 2, 3, 4, 5],
	],
	u'+': [
		[3],
		[3],
		[1, 2, 3, 4, 5],
		[3],
		[3],
	],
	u' ': [
		[],
		[],
		[],
		[],
		[],
	],
	u':': [
		[],
		[3],
		[],
		[3],
		[],
	],
	u';': [
		[],
		[3],
		[],
		[3],
		[2],
	],
	u'!': [
		[3],
		[3],
		[3],
		[],
		[3],
	],
	u'?': [
		[2, 3, 4],
		[1, 5],
		[3, 4],
		[],
		[3],
	],
	u'"': [
		[2, 4],
		[2, 4],
		[],
		[],
		[],
	],
	u'\'': [
		[3],
		[3],
		[],
		[],
		[],
	],
	u'$': [
		[2, 3, 4, 5],
		[1, 3],
		[2, 3, 4],
		[3, 5],
		[1, 2, 3, 4],
	],
	u'%': [
		[1, 2, 5],
		[1, 2, 4],
		[3],
		[2, 4, 5],
		[1, 4, 5],
	],
	u'/': [
		[5],
		[4],
		[3],
		[2],
		[1],
	],
	u'\\': [
		[1],
		[2],
		[3],
		[4],
		[5],
	],
	u'(': [
		[3],
		[2],
		[2],
		[2],
		[3],
	],
	u')': [
		[3],
		[4],
		[4],
		[4],
		[3],
	],
	u'[': [
		[2, 3],
		[2],
		[2],
		[2],
		[2, 3],
	],
	u']': [
		[3, 4],
		[4],
		[4],
		[4],
		[3, 4],
	],
	u'{': [
		[3],
		[2],
		[1, 2],
		[2],
		[3],
	],
	u'}': [
		[1],
		[2],
		[2, 3],
		[2],
		[1],
	],
	u'<': [
		[3],
		[2],
		[1],
		[2],
		[3],
	],
	u'>': [
		[3],
		[4],
		[5],
		[4],
		[3],
	],
	u'=': [
		[],
		[1, 2, 3, 4, 5],
		[],
		[1, 2, 3, 4, 5],
		[],
	],
	u'*': [
		[1, 3, 5],
		[2, 3, 4],
		[1, 2, 3, 4, 5],
		[2, 3, 4],
		[1, 3, 5],
	],
	u'~': [
		[],
		[2],
		[1, 3, 5],
		[4],
		[],
	],
	u'#': [
		[2, 4],
		[1, 2, 3, 4, 5],
		[2, 4],
		[1, 2, 3, 4, 5],
		[2, 4],
	],
	u'^': [
		[3],
		[2, 4],
		[],
		[],
		[],
	],
	u'°': [
		[3],
		[2, 4],
		[3],
		[],
		[],
	],
	u'|': [
		[3],
		[3],
		[3],
		[3],
		[3],
	],
	u'@': [
		[2, 3, 4],
		[1, 5],
		[1, 2, 3, 5],
		[1, 2, 3, 4, 5],
		[2, 3, 4],
	],
	u'€': [
		[2, 3, 4],
		[1, 2, 3],
		[1],
		[1, 2, 3],
		[2, 3, 4],
	],
	u'µ': [
		[1, 5],
		[1, 5],
		[1, 2, 3, 4, 5],
		[1, 5],
		[1],
	],
	u'§': [
		[3, 4, 5],
		[2, 4],
		[1, 3, 5],
		[2, 4],
		[1, 2, 3],
	],
	u'→': [
		[3],
		[4],
		[1, 2, 3, 4, 5],
		[4],
		[3],
	],
	u'←': [
		[3],
		[2],
		[1, 2, 3, 4, 5],
		[2],
		[3],
	],
	u'↑': [
		[3],
		[2, 3, 4],
		[1, 3, 5],
		[3],
		[3],
	],
	u'↓': [
		[3],
		[3],
		[1, 3, 5],
		[2, 3, 4],
		[3],
	],
	u'…': [
		[],
		[],
		[],
		[],
		[1, 3, 5],
	],
	u'·': [
		[],
		[],
		[3],
		[],
		[],
	],
	u'÷': [
		[3],
		[],
		[1, 2, 3, 4, 5],
		[],
		[3],
	],
	u'×': [
		[],
		[2, 4],
		[3],
		[2, 4],
		[],
	],
	u'😃': [
		[2, 4],
		[],
		[1, 2, 3, 4, 5],
		[1, 5],
		[2, 3, 4],
	],
	u'☺': [
		[2, 4],
		[2, 4],
		[],
		[1, 5],
		[2, 3, 4],
	],
	u'☹': [
		[2, 4],
		[2, 4],
		[],
		[2, 3, 4],
		[1, 5],
	],
	u'😐': [
		[2, 4],
		[2, 4],
		[],
		[1, 2, 3, 4, 5],
		[],
	],
	u'😉': [
		[2, 4, 5],
		[2],
		[],
		[1, 5],
		[2, 3, 4],
	],
	u'♥': [
		[2, 4],
		[1, 2, 3, 4, 5],
		[1, 2, 3, 4, 5],
		[2, 3, 4],
		[3],
	],
}

ICONMAP = [
	(u"->", u"→"),
	(u"<-", u"←"),
	(u":D", u"😃"),
	(u":)", u"☺"),
	(u":(", u"☹"),
	(u":|", u"😐"),
	(u":I", u"😐"),
	(u";)", u"😉"),
	(u"<3", u"♥"),
]

def main():
	board = pyk8055.k8055(0)
	display = K8055MatrixDisplayController(board, PIXMAP, ICONMAP)
	try:
		text = sys.argv[1].decode('utf-8')
	except IndexError:
		text = u"It works!"
	
	try:
		while True:
			display.write_text(text)
			continue
	except KeyboardInterrupt:
		display.stop()

main()
